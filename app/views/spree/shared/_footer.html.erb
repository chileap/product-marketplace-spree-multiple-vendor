<% cache spree_menu_cache_key('footer') do %>
  <footer id="footer" class="pt-2 mx-auto border-top footer-spree">
    <div class="container-fluid px-5">
      <div class="row d-flex justify-content-xl-between pb-xl-2 px-0">
        <div class="d-flex d-xl-block flex-xl-grow-0 col-xl-4 pl-0">
          <figure class="logo pt-xl-2 pb-xl-1">
            <%= logo %>
          </figure>
          <% if current_store.description %>
            <div class="d-none d-xl-block pt-xl-2 footer-spree-info">
              <%= current_store.description %>
            </div>
          <% end %>
        </div>
        <div class="py-xl-5">
          <div class="d-block py-3 footer-spree-label">
            <%= Spree.t(:contact_us) %>
          </div>
          <div class="d-flex flex-column pb-3 flex-grow-2 footer-spree-contact-note">
            <div>
              <strong>Product Mall</strong>
              <br>
              <% if current_store.address %>
                <%= current_store.address.html_safe %>
              <% end %>
            </div>
            <% if current_store.contact_phone&.present? %>
              <div><%= Spree.t(:call_us_now) %><%= current_store.contact_phone %></div>
            <% end %>
            <% if current_store.customer_support_email&.present? %>
              <div><%= Spree.t(:email) %>: <%= current_store.customer_support_email %></div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="row d-flex border-top pt-3 text-uppercase footer-spree-menu-links">
        <% if spree_menu('footer').present? %>
          <% spree_menu('footer').children.each do |parent| %>
            <div class="col-3 mb-5 px-0">
              <div class="footer-spree-label">
                <% if parent.container? %>
                  <%= parent.name %>
                <% else %>
                  <%= spree_nav_link_tag(parent) %>
                <% end %>
              </div>
              <% parent.children.each do |child| %>
                <div class="pt-2">
                  <%= spree_nav_link_tag(child) %>
                </div>
              <% end %>
            </div>
          <% end %>
        <% end %>

        <% if spree.respond_to?(:account_path) %>
          <div class="col-3 mb-5">
            <div class="footer-spree-label">
              <%= Spree.t('nav_bar.my_account') %>
            </div>
            <div class="pt-2">
              <%= link_to Spree.t(:my_orders).upcase, spree.account_path(anchor: "account-my-orders") %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <%= render 'spree/shared/copyright' %>
  </footer>
<% end %>
